<style>
.markdown-body {
	font-size: 1.2em;
	font-family: 新細明體;
}
td {
	vertical-align: top;
	white-space: pre-line;
	font-family: Menlo,Monaco,Consolas,"Courier New",monospace !important;
}
h2 {
	text-align: center;
}
h4 {
	font-size: 1.1em !important;
	font-weight: bold;
}
.timelimit {
	text-align: center;
	font-weight: bold;
}
</style>
<h1 style="text-align: center; font-size: 30px">2018 臺南一中資訊社 資訊學科能力競賽決賽 模擬賽</h1>
<p style="font-size: 12px; text-align: right;">
@Last modified time: 2018-12-02T22:58:23+08:00
</p>

## 說明與注意事項
1. 比賽時間：13:30 ~ 16:30，共 3 小時，競賽結束後將無法再上傳程式碼。
2. 競賽系統使用與全國學科能力競賽/資訊奧林匹亞相同的CMS系統，評測伺服器為Ubuntu 16.04，編譯器版本為g++ 5.4.0 / gcc 5.4.0，編譯參數請見評分系統的題目敘述頁。
3. 考生除必要文具外，不得攜帶任何其他物件，如隨身碟、行動電話、計算機、英文字典、手冊、電子通訊器材或電腦週邊等。
4. 本競賽採電腦線上自動評分，程式必須依規定上傳至評分主機。請嚴格遵守每一題目所規定之原始程式、輸入檔、輸出檔等檔名及格式。若未遵守，該題將可以0分計算。
5. 本次競賽採取全面回饋機制，程式上傳至評分主機後，將自動編譯並進行測試。視等待評分題數多寡，該題測試結果及該題得分數將可於短時間內得知。程式可重複上傳及評分，但同一題兩次上傳之間必須間隔二分鐘以上。每題最終分數以該題所有單次評分結果之最高分計算。
6. 考生之程式必須於各題所設定之每組測試資料執行時間上限內執行完畢。考生程式所需之執行時間超過上限時間者視同未完成，該組測試資料得分將以0分計算。考生程式執行時可使用之記憶體空間以512MB為限，若題目另有規定，則從其規定。
7. 於本次競賽中，考生須上傳原始程式碼（.c, .cpp），除題目另有規定外，輸入資料則自標準輸入（Standard input）讀取，計算結果須輸出至標準輸出（Standard output）。（注意：請勿自行讀寫檔案，若因此造成線上評分系統無法評分，該次評分結果將以0分計算）
8. 對考題有任何疑義，請以評分系統之訊息詢問功能（Communication）提問。


---
<div style="page-break-after: always;"></div>


## A. U-turn
<p class="timelimit">時間限制：0.5 秒</p>

#### 問題描述

<p class="content">玩家每回合必須做一些動作，目標是將所有牌都翻到正面。</p>

<p class="content">每一個回合，玩家可以將任意 k 張連續的卡牌反轉，正面的翻至背面、背面的翻至正面。  
每一次影響 k 張卡牌的操作，會被扣 k 分，且一場遊戲中每次反轉的卡牌數不能相同。</p>

<p class="content">給你一場遊戲的起始狀態，試求最小扣分為何？</p>

#### 輸入說明

輸入是一行長度 n 僅包含 0 和 1 的字串，以 0 代表正面、以 1 代表背面。  
1 <= n <= 15

#### 輸出說明

輸出最小扣分 k

#### 評分說明

本題共有五個子題，每一子題可有多筆測試資料：
- 第一子題 8分：所有 1 必定連續出現。
- 第二子題 11分：所有 0 必定連續出現。
- 第三子題 14分：最佳解操作不會超過 4 次。
- 第四子題 25分：n <= 10
- 第五子題 42分：無特別限制

| 輸入範例 | 輸出範例 |
| --- | --- |
| 1000101 | 9 |
| 001100010 | 3 |
| 1010100000 | 7 |


---
<div style="page-break-after: always;"></div>


## B. Number
<p class="timelimit">時間限制：1 秒</p>

#### 問題描述

輸入兩個正整數 n, k 輸出 1~n 的所有排列中，恰有 k 數字滿足 `a[i] == i`  
且剩餘數字皆滿足 `a[i] != i` 的排列共有多少個？

結果可能有點大，請輸出答案 % 1,000,000,007

#### 輸入說明

輸入兩個整數 n, k  
- 1 <= n <= 100,000  
- 0 <= k <= 256  
- k < n

#### 輸出說明

輸出滿足條件的排列數 % 1,000,000,007

#### 評分說明

本題共有五個子題，每一子題可有多筆測試資料：

- 第一子題 18分：n <= 8
- 第二子題 1分：k = n-1
- 第三子題 21分：k = 0
- 第四子題 24分：n <= 2,000 且 k <= 10
- 第五子題 36分：無特別限制

| 輸入範例 | 輸出範例 |
| --- | --- |
| 2 0 | 1 |
| 3 1 | 3 |


---
<div style="page-break-after: always;"></div>


## C. Rainwater
<p class="timelimit">時間限制：2 秒</p>

#### 問題描述

在下雨的時候，雨水會順著屋頂滑落。  
滑落的雨水可能會落到地面，或者別人家的屋頂。

假設屋頂全都具有相同的寬度，於是屋頂可以被表達成二維平面上斜率不為 0 的線段，  
在 X 軸上每一單位長度，會在每一單位時間接收一單位的水量，線段傾斜的方向為雨水滑落方向，  
如下圖所示：

![](img1.png)
<!-- https://i.imgur.com/Lmvm2Ji.png -->

給你每一家房子的屋頂，問每一家房子的屋頂總共會有多少水量落在上面。

<div style="page-break-after: always;"></div>

#### 輸入說明

第第子題一行有一個整數 n 代表有幾家屋頂，接下來會有 n 行，  
每行給四個整數 x<sub>1</sub>, y<sub>1</sub>, x<sub>2</sub>, y<sub>2</sub> 代表屋頂的兩端點 (x<sub>1</sub>, y<sub>1</sub>) 和 (x<sub>2</sub>, y<sub>2</sub>)。  
保證任兩線段絕不會相交、不會有任兩個屋頂共用同一個座標點。  
地面的任何一個點上方，都保證至多被 100 個屋頂覆蓋。

- 1 <= n <= 40,000
- 0 <= x<sub>1</sub>, y<sub>1</sub>, x<sub>2</sub>, y<sub>2</sub> <= 1,000,000
- x<sub>1</sub> < x<sub>2</sub>
- y<sub>1</sub> != y<sub>2</sub>

#### 輸出說明

輸出 n 行，第 i 行代表輸入的第 i 個屋頂的雨水滑落量

#### 評分說明

本題共有五個子題，每一子題可有多筆測試資料：

- 第一子題 5分：每家屋頂不會被其他家屋頂遮住
- 第二子題 14分：每家屋頂皆保證 y<sub>2</sub> < y<sub>1</sub>
- 第三子題 19分：n <= 1,000
- 第四子題 29分：x<sub>2</sub> <= 1,000
- 第五子題 33分：無特別限制


<table>
<tr>
	<th>輸入範例</th><th>輸出範例</th>
</tr>
<tr>
	<td>6
			13 7 15 6
			3 8 7 7
			1 7 5 6
			5 5 9 3
			6 3 8 2
			9 6 12 8
	</td>
	<td>2
			4
			2
			11
			0
			3
	</td>
</tr>
</table>


---
<div style="page-break-after: always;"></div>


## D. Component
<p class="timelimit">時間限制：0.5 秒</p>

#### 問題描述

給你 N 個節點，每個點上附有一個正整數。
假如某 2 個節點上的數其最大公因數（GCD）大於 1，則這 2 個節點之間會有一條邊存在。
要請你算出這 N 個節點構成的的圖形中，共有幾個連通塊。

#### 輸入說明

每筆第的子題第一列，有一個正整數 N 代表節點的數目。  
接下來有 N 個正整數，代表這 N 個節點上面附帶的數。
- 1 <= N <= 100,000
- 1 <= 節點上的數 <= 1,000,000

#### 輸出說明

對每筆第輸子題出這 N 個節點構成的圖形中，共有幾個連通塊。

#### 評分說明

本題共有五個子題，每一子題可有多筆測試資料：
- 第一子題 13分：N <= 100
- 第二子題 11分：N <= 100,000、節點上的數 <= 128
- 第三子題 12分：N <= 100,000、節點上每個數的最大質因數 <= 128
- 第四子題 28分：N <= 1,000、節點上的數 <= 1,000,000
- 第五子題 36分：無特別限制


<table>
<tr>
	<th>輸入範例</th><th>輸出範例</th>
</tr>
<tr>
	<td>3
			2 3 4
	</td>
	<td>2
	</td>
</tr>
<tr>
	<td>6
			2 3 4 5 6 6
	</td>
	<td>2
	</td>
</tr>
</table>


---
<div style="page-break-after: always;"></div>


## E. Maze
<p class="timelimit">時間限制：0.5 秒</p>

#### 問題描述

給你一個由 r\*c 個方格組成的迷宮，每次移動可以往上、下、左、右四個方向走一格。  
你不能走到牆壁上、或走到迷宮範圍外面。

這迷宮會有一個起點，以及最多四種門和能打開對應門的鑰匙，你必須先取得對應的鑰匙才能經過對應的門。  
問你從起點走到終點最少要走多少步？

- `#` → 牆
- `.` → 可以走的空地
- `*` → 起點
- `X` → 終點
- `R`、`G`、`B`、`Y` → 門（對應至同字母小寫鑰匙）
- `r`、`g`、`b`、`y` → 鑰匙（對應至同字母大寫門）

#### 輸入說明

第一行給你兩個整數 r, c 代表地圖大小，  
接下來會有 r 行，每行有 c 個字。  
- 1 <= r, c <= 100

注意：此迷宮被允許具有以下特性：

- 擁有超過一個終點
- 根本沒有終點
- 存在複數同種類的門或鑰匙
- 有些門不存在對應種類的鑰匙，或有些鑰匙不存在對應種類的門

<div style="page-break-after: always;"></div>

#### 評分說明

本題共有五個子題，每一子題可有多筆測試資料：
- 第一子題 12分：沒有門，單一終點
- 第二子題 14分：沒有門，允許多終點
- 第三子題 23分：只有一個門、保證有鑰匙且拿得到，允許多終點
- 第四子題 25分：可存在多個門、保證有鑰匙且拿得到，允許多終點和無終點
- 第五子題 26分：無特別限制

<table>
<tr>
	<th>輸入範例</th><th>輸出範例</th>
</tr>
<tr>
	<td>1 10
  		*........X
	</td>
	<td>Escape possible in 9 steps.
		</td>
</tr>
<tr>
	<td>1 3
			*#X
	</td>
	<td>The poor student is trapped!
	</td>
</tr>
<tr>
	<td>3 20
			##############
			#XY.gBr.*.Rb.G.GG.y#
			##############
	</td>
	<td>Escape possible in 45 steps.
	</td>
</tr>
</table>
